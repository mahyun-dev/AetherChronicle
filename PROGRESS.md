# Aether Chronicle - 개발 진행 상황

## 📅 최종 업데이트: 2025-12-15

---

## ✅ Phase 1: 프로토타입 (완료)

### 1. 프로젝트 기반 구조
- [x] Phaser 3.80.1 게임 엔진 설정
- [x] Webpack 5 번들러 & 개발 서버
- [x] GitHub Pages 자동 배포 워크플로우
- [x] 한글 전용 지원

### 2. 게임 씬 시스템
- [x] BootScene - 초기 부팅
- [x] PreloadScene - 에셋 & 데이터 로딩
- [x] MainMenuScene - 메인 메뉴 (새 게임, 이어하기, 설정)
- [x] GameScene - 핵심 게임플레이
- [x] UIScene - HUD 오버레이

### 3. 엔티티 시스템
- [x] Entity 베이스 클래스 (HP, 방어력, 대미지, 회복, 사망)
- [x] Player 클래스
  - [x] WASD/방향키 8방향 이동
  - [x] 마우스 클릭 공격 (투사체)
  - [x] 레벨/경험치/골드 시스템
  - [x] 스탯 관리 (HP, MP, 공격력, 방어력, 속도)
- [x] Monster 클래스
  - [x] AI 상태머신 (대기, 추격, 공격, 귀환)
  - [x] 슬라임 Lv1 구현
  - [x] 늑대 Lv5 구현
  - [x] 드롭 테이블 시스템

### 4. 전투 시스템
- [x] 플레이어 투사체 공격
- [x] 몬스터 근접 공격
- [x] 충돌 감지 및 대미지 계산
- [x] HP/MP 관리
- [x] 경험치 보상
- [x] 골드 보상
- [x] 레벨업 시스템

### 5. 아이템 시스템
- [x] DataManager 싱글톤 (JSON 데이터 로더)
- [x] Item 클래스 (재료, 소모품)
- [x] DroppedItem 클래스 (월드 아이템)
- [x] 몬스터 처치 시 아이템 드롭 (확률 기반)
- [x] 플레이어 자동 습득 (50px 범위)
- [x] InventoryManager (48슬롯, 스택, 퀵슬롯)
- [x] InventoryUI (I키, 8x6 그리드, 툴팁, 우클릭 사용)

### 6. UI 시스템
- [x] HP 바 (실시간 업데이트)
- [x] MP 바
- [x] 레벨 & 경험치 바
- [x] 골드 표시
- [x] 퀵슬롯 (1, 2, 3키)
- [x] 미니맵 플레이스홀더
- [x] 인벤토리 팝업창

### 7. 데이터 파일
- [x] monsters.json (슬라임, 늑대)
- [x] items.json (재료템, 포션)

---

## 🚧 Phase 2: 핵심 시스템 확장 (진행 중)

### 1. 스킬 시스템
- [x] Skill 베이스 클래스 (MeleeSkill, RangedSkill, AOESkill, DashSkill, BuffSkill)
- [x] 전사 기본 스킬 4개
  - [x] 1번: 돌진 베기 (Lv 10 해금, 300px 돌진, 120% 피해)
  - [x] 2번: 방어 자세 (Lv 15 해금, 3초간 피해 60% 감소, 이동속도 50% 감소)
  - [x] 3번: 회전 베기 (Lv 20 해금, 250px 광역, 150% 피해)
  - [x] R번: 파멸의 일격 (Lv 30 해금, 600px 충격파, 400% 피해)
- [x] 스킬 쿨다운 UI (하단 스킬바, 쿨다운 오버레이 & 타이머)
- [x] 스킬 해금 시스템 (레벨업 시 자동 해금)
- [x] 스킬 애니메이션/이펙트 (돌진, 광역, 버프 오라 등)
- [x] MP 소모 및 MP바 실시간 업데이트

### 2. 장비 시스템
- [x] Equipment 클래스
- [x] 장비 슬롯 9개 (무기, 투구, 갑옷, 장갑, 신발, 목걸이, 반지x2, 벨트)
- [x] 장비 착용/해제 (우클릭 또는 E키)
- [x] 스탯 보너스 자동 적용
- [x] 장비 등급 시스템 (일반, 고급, 희귀, 영웅, 전설)
- [x] 등급별 색상 구분
- [x] 장비 데이터 30종 (무기 10종, 방어구 12종, 액세서리 8종)
- [x] EquipmentUI (E키, 9슬롯 레이아웃, 툴팁)
- [x] 장비 강화 시스템
  - [x] 강화 레벨 시스템 (+0 ~ +15, 등급별 최대치)
  - [x] 강화 성공률 (등급/레벨별 차등)
  - [x] 강화 비용 (골드 + 강화석)
  - [x] 강화석 4종류 (기본/고급/희귀/전설)
  - [x] 강화 실패 시 레벨 하락 (+3 이상)
  - [x] 강화 실패 시 장비 파괴 (+5 이상)
  - [x] EnhancementUI (H키, 성공/실패 애니메이션)
  - [x] 장비창에서 Shift+클릭으로 강화 UI 연동

### 3. 확장된 전투
- [x] 크리티컬 확률 (기본 5%, 장비로 증가)
- [x] 크리티컬 대미지 (기본 150%, 장비로 증가)
- [x] 회피 확률 (기본 0%, 장비로 증가)
- [x] 크리티컬/회피 시각 효과 (노란색 대미지, MISS 텍스트, 충격파, 카메라 쉐이크)
- [x] 장비 스탯 연동 (critRate, critDamage, evasion)
- [x] 상태 이상 시스템
  - [x] StatusEffect 클래스 (6가지 타입)
  - [x] StatusEffectManager (상태 이상 관리)
  - [x] 기절(Stun) - 이동/공격 불가, 별 이펙트
  - [x] 독(Poison) - 지속 피해 (녹색)
  - [x] 화상(Burn) - 강한 지속 피해 (주황색)
  - [x] 빙결(Freeze) - 이동 속도 감소, 얼음 색조
  - [x] 둔화(Slow) - 이동/공격 속도 감소
  - [x] 출혈(Bleed) - 지속 피해 (빨강)
  - [x] 상태 이상 아이콘 표시
  - [x] Entity에 통합 (canAct, getCurrentSpeed)
- [x] 넉백 효과
  - [x] Entity에 넉백 시스템 추가
  - [x] applyKnockback() 메서드 (강도, 지속시간, 방향)
  - [x] 플레이어 기본 공격에 넉백 적용
  - [x] 스킬에 넉백 강도 설정
  - [x] 크리티컬 시 넉백 증가
  - [x] 넉백 시각 효과 (먼지 파티클)
- [x] 콤보 시스템
  - [x] Player에 콤보 트래킹 (count, timer, multipliers)
  - [x] 2초 타임아웃으로 자동 리셋
  - [x] 티어별 데미지 배율 (1.0x ~ 1.5x)
  - [x] 모든 공격에 콤보 적용 (기본/스킬/투사체)
  - [x] UIScene에 콤보 UI 표시
  - [x] 3/5/10 콤보 마일스톤 화면 효과

### 4. 몬스터 확장
- [x] 4종 추가 몬스터 (고블린, 고블린 전사, 하피, 오거)
- [x] 필드 보스 - 황금 그리폰 (3단계 페이즈 시스템)
- [x] AI 타입별 행동 패턴 (일반, 공격적, 원거리, 탱커, 보스)
- [x] 몬스터 스폰 시스템 (난이도별 배치)
- [x] 보스 페이즈 전환 (HP % 기반)
- [x] 총 6종 + 보스 1종

### 5. 맵 시스템
- [x] Tiled 타일맵 통합
- [x] 마을 맵 (town.json)
- [x] 필드 맵 (field.json)
- [x] 타일셋 이미지 생성 (grassland_tileset.png)
- [x] 맵 간 이동 (포탈 시스템)
- [x] 충돌 레이어 (Collision 레이어)
- [x] 오브젝트 상호작용 (포탈 F키)
- [ ] 던전 맵 (Phase 3)
- [ ] 추가 맵 (숲, 동굴 등)

---

## 📋 Phase 3: 콘텐츠 확장 (진행 중)

### 1. 퀘스트 시스템
- [x] Quest 클래스
  - [x] 퀘스트 ID, 이름, 설명, 타입, 레벨, 의뢰인
  - [x] 목표 시스템 (objectives 배열)
  - [x] 보상 시스템 (exp, gold, items)
  - [x] 상태 관리 (available, active, completed)
  - [x] 선행 퀘스트 요구사항
- [x] QuestManager 클래스
  - [x] 퀘스트 로드 (DataManager 연동)
  - [x] 퀘스트 수락/완료/포기
  - [x] 진행도 업데이트 (updateProgress)
  - [x] 보상 지급 (경험치, 골드, 아이템)
  - [x] 퀘스트 체인 해금 (checkUnlockedQuests)
  - [x] 이벤트 발생 (quest:accepted, quest:progress, quest:completed, quest:unlocked)
- [x] quests.json 데이터 파일 (5개 퀘스트)
  - [x] quest_001: 슬라임 소탕 작전 (10마리 처치, Lv1)
  - [x] quest_002: 늑대 사냥 (5마리 처치 + 가죽 3개, Lv5)
  - [x] quest_003: 고블린 토벌 (8+3마리, Lv10, 강화석 보상)
  - [x] quest_004: 재료 수집 (슬라임 젤리 20개, Lv1)
  - [x] quest_005: 필드 보스 토벌 (황금 그리폰, Lv30)
- [x] 퀘스트 타입 (hunt, collect)
- [x] QuestUI (L키)
  - [x] 탭 시스템 (진행 중/완료 가능/수락 가능/완료)
  - [x] 퀘스트 리스트 (7개 항목)
  - [x] 상세 정보 패널
  - [x] 수락/완료/포기 버튼
  - [x] 진행도 표시 (목표별 current/required)
  - [x] 보상 정보 표시
  - [x] 알림 시스템
- [x] Player 통합
  - [x] QuestManager 인스턴스 생성
  - [x] 퀘스트 로드 (loadQuests)
- [x] 진행도 추적
  - [x] Monster 처치 시 updateProgress('kill')
  - [x] Item 획득 시 updateProgress('collect')
  - [x] 몬스터 ID 매핑 (slime, wolf, goblin, goblin_warrior, golden_griffon)
- [x] DataManager 연동
  - [x] loadQuestData() 메서드
  - [x] getQuest() / getAllQuests() 메서드
- [ ] NPC 퀘스트 제공자 (Phase 3.2)
- [ ] talk, explore 퀘스트 타입 (Phase 3.2)

### 2. NPC 시스템
- [ ] NPC 베이스 클래스
- [ ] 대화 시스템
- [ ] 상점 NPC
- [ ] 퀘스트 NPC
- [ ] 스토리 NPC

### 3. 상점 시스템
- [ ] 아이템 구매/판매
- [ ] 상점 UI
- [ ] 아이템 가격 책정
- [ ] 제한된 재고

### 4. 저장/로드
- [ ] LocalStorage 저장
- [ ] 플레이어 데이터 저장
- [ ] 인벤토리 저장
- [ ] 퀘스트 진행도 저장
- [ ] 불러오기 기능

### 5. 사운드
- [ ] 배경음악
- [ ] 효과음 (공격, 피격, 레벨업, 아이템 획득)
- [ ] 볼륨 조절

---

## 🎨 Phase 4: 비주얼 & 폴리싱 (예정)

### 1. 그래픽
- [ ] 플레이어 스프라이트 & 애니메이션
- [ ] 몬스터 스프라이트 & 애니메이션
- [ ] 스킬 이펙트
- [ ] 아이템 아이콘
- [ ] UI 아이콘

### 2. 애니메이션
- [ ] 이동 애니메이션
- [ ] 공격 애니메이션
- [ ] 피격 애니메이션
- [ ] 사망 애니메이션
- [ ] 스킬 캐스팅

### 3. 파티클 & 이펙트
- [ ] 공격 이펙트
- [ ] 스킬 이펙트
- [ ] 레벨업 이펙트
- [ ] 아이템 드롭 이펙트

### 4. UI/UX 개선
- [ ] 메뉴 애니메이션
- [ ] 툴팁 개선
- [ ] 알림 시스템
- [ ] 대미지 텍스트 개선

---

## 🐛 알려진 이슈 & 수정 내역

### 최근 수정 (2025-12-14)
- ✅ 체력 물약 사용 시 HP바 실시간 반영 (Entity.heal()에 이벤트 추가)
- ✅ 인벤토리 UI 열림 확인 (I키 입력 정상 작동)
- ✅ 아이템 드롭 확률 시스템 구현 및 디버깅
- ✅ 인벤토리 스택 시스템 구현
- ✅ **스킬 시스템 완성** - 전사 4개 스킬 구현
- ✅ 스킬 해금 시스템 (Lv 10/15/20/30 단계별 해금)
- ✅ 방어 자세 스킬 (피해 감소 60%, 이동속도 감소 50%)
- ✅ 스킬 쿨다운 UI 및 MP 소모 시스템
- ✅ 기획서 기준으로 스킬 이름 및 효과 수정
- ✅ **장비 시스템 구현** - Equipment 클래스, EquipmentManager, EquipmentUI
- ✅ 장비 30종 데이터 추가 (equipments.json)
- ✅ 장비 착용 시 스탯 자동 적용/제거
- ✅ 등급별 색상 및 강화 레벨 시스템
- ✅ E키로 장비창 토글, 우클릭으로 장비 착용/해제
- ✅ **몬스터 확장 완료** - 4종 추가 + 필드 보스 1종
- ✅ AI 타입 시스템 (일반/공격적/원거리/탱커/보스)
- ✅ 보스 3단계 페이즈 시스템 (HP 기반 스탯 변화)
- ✅ 몬스터 19마리 배치 (난이도별 구역 분리)

---

## 📊 파일 구조

```
AetherChronicle/
├── src/
│   ├── entities/
│   │   ├── Entity.js         # 베이스 엔티티
│   │   ├── Player.js          # 플레이어
│   │   ├── Item.js            # 아이템
│   │   └── Skill.js           # 스킬 시스터 (Slime, Wolf)
│   │   └── Item.js            # 아이템
│   ├── scenes/
│   │   ├── BootScene.js       # 부팅
│   │   ├── PreloadScene.js    # 로딩
│   │   ├── MainMenuScene.js   # 메뉴
│   │   ├── GameScene.js       # 게임
│   │   └── UIScene.js         # UI
│   ├── managers/
│   │   ├── DataManager.js     # 데이터 로더
│   │   └── InventoryManager.js # 인벤토리
│   ├── ui/
│   │   └── InventoryUI.js     # 인벤토리 UI
│   ├── config/
│   │   ├── GameConfig.js      # 게임 설정
│   │   └── Constants.js       # 상수
│   └── main.js                # 엔트리
├── assets/
│   └── data/
│       ├── items.json         # 소모품/재료 데이터
│       ├── equipments.json    # 장비 데이터 (30종)
│       ├── monsters.json      # 몬스터 데이터
│       └── skills.json        # 스킬 데이터
├── .github/workflows/
│   └── deploy.yml             # GitHub Pages 배포
├── index.html
├── package.json
├── webpack.config.js
├── README.md                  # 프로젝트 소개
└── PROGRESS.md                # 이 파일
```

---

## 🎮 현재 플레이 가능

### 전투 시스템
- ✅ WASD/방향키로 8방향 이동
- ✅ 마우스 클릭으로 투사체 공격
- ✅ 1/2/3/R키로 스킬 사용 (레벨 해금 필요)
  - Lv 10: 돌진 베기
  - Lv 15: 방어 자세
  - Lv 20: 회전 베기
  - Lv 30: 파멸의 일격
- ✅ 스킬 쿨다운 UI 및 MP 소모
- ✅ 6종 일반 몬스터 + 필드 보스 1종
  - Lv 1-3: 슬라임
  - Lv 5: 숲늑대
  - Lv 8: 고블린 (공격적 AI)
  - Lv 10: 고블린 전사 (공격적 AI)
  - Lv 13: 하피 (원거리 AI)
  - Lv 17: 오거 (탱커 AI)
  - Lv 20: 황금 그리폰 (보스, 3페이즈)
- ✅ 경험치/골드 획득 및 레벨업

### 아이템 시스템
- ✅ 몬스터 처치 시 아이템 자동 드롭
- ✅ 아이템 자동 습득 (50px 범위)
- ✅ I키로 인벤토리 열기 (48슬롯)
- ✅ 인벤토리에서 포션 사용 (우클릭)
- ✅ 퀵슬롯 (Q/F/Z키)

### 장비 시스템 ⭐ NEW
- ✅ E키로 장비창 열기
- ✅ 30종의 장비 (무기 10종, 방어구 12종, 액세서리 8종)
- ✅ 인벤토리에서 장비 우클릭으로 착용
- ✅ 장비창에서 클릭으로 해제
- ✅ 착용 시 스탯 자동 적용 (공격력, 방어력, HP, MP 등)
- ✅ 등급별 색상 표시 (일반, 고급, 희귀, 영웅, 전설)
- ✅ 장비 강화 단계 (+0 ~ +15)

---

## 🚀 다음 단계

1. **크리티컬/회피 시스템** - 전투 다이나믹 향상
2. **타일맵 통합** - Tiled 맵 에디터로 실제 맵 제작
3. **장비 강화 시스템** - 대장간 NPC 및 강화 UI
4. **퀘스트 시스템** - 기본 메인/서브 퀘스트
5. **저장/로드 시스템** - LocalStorage 활용

---

## 🚀 다음 작업 우선순위

1. **크리티컬/회피 시스템** ⭐ 최우선
   - 크리티컬 확률 및 피해 계산
   - 회피 확률 시스템
   - 이펙트 및 사운드
   - 예상 작업: 3-5일

2. **타일맵 통합** ⭐⭐
   - Tiled 맵 에디터로 초보자의 숲 제작
   - 충돌 레이어, 오브젝트 상호작용
   - 예상 작업: 1-2주

3. **장비 강화 시스템** ⭐⭐⭐
   - 대장간 NPC
   - 강화 UI 및 확률 시스템
   - 강화석 아이템 추가
   - 예상 작업: 1주

4. **퀘스트 시스템** ⭐⭐⭐⭐
   - Quest 클래스 및 QuestManager
   - 기본 메인 퀘스트 3개
   - 퀘스트 UI (L키)
   - 예상 작업: 2-3주

5. **저장/로드 시스템**
   - LocalStorage 활용
   - 세이브 데이터 구조화
   - 예상 작업: 1주
